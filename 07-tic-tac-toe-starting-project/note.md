# 状态使用

当基于状态的前一个值更新状态state时,你应该向状态更新函数传递一个函数, 而不是你想要的新状态值｡

因为如果直接设置的话，这里的状态更新不是立即执行的｡



强烈建议如果你的状态是一个对象或数组, 你以不可变的方式更新那个状态, 这只是意味着你创建一个旧状态的副本,

所以首先是一个新对象或一个新数组, 然后你只需要改变那个副本, 而不是现有的对象或数组｡

这个建议的原因是, 如果你的状态是一个对象或数组,你在JavaScript中处理的是一个引用值,

你会立即更新内存中的旧值, 甚至在React执行这个预定的状态更新之前｡

如果应用程序中有多个位置为同一状态调度状态更新,这可能会再次导致奇怪的错误或副作用｡



总之就是如果是修改对象或者数组，需要先复制出来一个副本，然后修改副本中的值，返回副本



# 状态提升 state up

讲了个状态提升，就是说，如果你需要改变两个关联组件的统一状态，可以把状态管理放在他们的父组件中



可以通过

```
const [activePlayer, setActivePlayer] = useState('X');
```

了解到属性的状态提升



可以通过

```
const [gameTurn,setGameTurn] = useState([])
```

了解到引用值、数组的状态提升



状态使用，当他是数组是，一定要深拷贝，像这种二维数组，要深拷贝到它里面的每一个数组

```
  let gameBoard = [...initialGameBoard.map(array => [...array])];
```

